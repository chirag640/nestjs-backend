# ================================
# ENCRYPTION TESTING - OPTION 3: AWS KMS (PAID)
# ================================
# Use this for production with medical/financial data
# ENTERPRISE ENCRYPTION - AWS KMS with Hardware Security Module
# HIPAA/GDPR/PCI DSS compliant
# Cost: ~$7/month for 1M records

PORT=3000
NODE_ENV=production
DATABASE_URL=mongodb+srv://user:password@cluster.mongodb.net/medicalrecords

# ================================
# üîê AWS KMS ENCRYPTION (PAID)
# ================================
# Setup Steps:
# 1. Go to AWS Console: https://console.aws.amazon.com/kms
# 2. Click "Create key"
# 3. Choose "Symmetric" and "Encrypt and decrypt"
# 4. Set description: "Medical records encryption key - Production"
# 5. Choose key administrators
# 6. Define key usage permissions (your IAM user/role)
# 7. Enable automatic key rotation (recommended: every 90 days)
# 8. Copy the Key ARN (format: arn:aws:kms:region:account:key/key-id)
#
# IAM Permissions Required:
# - kms:GenerateDataKey
# - kms:Decrypt
# - kms:DescribeKey
#
# Cost Estimate:
# - Fixed: $1/month per KMS key
# - Variable: $0.03 per 10,000 API requests
# - Example: 1M records/month = $1 + ($0.03 √ó 200) = $7/month
#
# Security Features:
# ‚úÖ Hardware Security Module (HSM) - FIPS 140-2 Level 3
# ‚úÖ Automatic key rotation every 90 days
# ‚úÖ CloudTrail audit logs for all operations
# ‚úÖ Multi-region support for disaster recovery
# ‚úÖ Key versioning with rollback capability
# ‚úÖ HIPAA, GDPR, PCI DSS certified

ENCRYPTION_STRATEGY=aws_kms
KMS_KEY_ID=arn:aws:kms:us-east-1:123456789012:key/abcd-1234-5678-90ab-cdef12345678

# Auth
JWT_SECRET=production_secret_minimum_32_characters_long_change_this
JWT_REFRESH_SECRET=production_refresh_secret_different_from_jwt_32_chars
FRONTEND_URL=https://yourdomain.com

# AWS Configuration
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
S3_BUCKET_NAME=medical-records-prod

# S3 files will be encrypted with KMS at rest (ServerSideEncryption: 'aws:kms')

# Redis (for queues and caching)
REDIS_URL=redis://production-redis:6379

# SMTP (for emails)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=apikey
SMTP_PASSWORD=SG.your_sendgrid_api_key
EMAIL_FROM="Medical Records <noreply@medicalrecords.com>"
SUPPORT_EMAIL=support@medicalrecords.com

# Features
ENABLE_CSRF=false
ALLOWED_ORIGINS=https://yourdomain.com,https://app.yourdomain.com

# ================================
# MONITORING (Optional but recommended)
# ================================
# Set up CloudWatch alarms for:
# - KMS API throttling
# - Decryption failures
# - Unusual key usage patterns
#
# CloudTrail example query:
# eventName = "Decrypt" OR eventName = "GenerateDataKey"

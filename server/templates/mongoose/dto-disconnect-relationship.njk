{# DTO for disconnecting records in a relationship #}
import { IsMongoId{% if relationship.type === 'many-to-many' or relationship.type === 'one-to-many' %}, IsArray, ArrayNotEmpty{% endif %} } from 'class-validator';
import { ApiProperty } from '@nestjs/swagger';

export class Disconnect{{ relationship.fromModel | default('') }}{{ relationship.toModel | default('') }}Dto {
  @ApiProperty({
    description: 'ID of the {{ relationship.fromModel | default('Source') }} record',
    example: '507f1f77bcf86cd799439011',
  })
  @IsMongoId()
  {{ relationship.fromModel | lower | default('source') }}Id!: string;

{% if relationship.type === 'many-to-many' or relationship.type === 'one-to-many' %}
  @ApiProperty({
    description: 'Array of {{ relationship.toModel | default('Target') }} IDs to disconnect',
    example: ['507f1f77bcf86cd799439012', '507f1f77bcf86cd799439013'],
    type: [String],
  })
  @IsArray()
  @ArrayNotEmpty()
  @IsMongoId({ each: true })
  {{ relationship.toModel | lower | default('target') }}Ids!: string[];
{% else %}
  @ApiProperty({
    description: 'ID of the {{ relationship.toModel | default('Target') }} record to disconnect',
    example: '507f1f77bcf86cd799439012',
  })
  @IsMongoId()
  {{ relationship.toModel | lower | default('target') }}Id!: string;
{% endif %}
}

# Server Configuration
PORT=3000
NODE_ENV=development

# CORS Configuration
# Comma-separated list of allowed origins for Cross-Origin Resource Sharing
# Example: http://localhost:3000,http://localhost:3001,https://yourdomain.com
ALLOWED_ORIGINS=http://localhost:3000

# Database Configuration
{% if database.type === 'MongoDB' %}
# MongoDB Connection String
# Format: mongodb://[username:password@]host[:port]/database[?options]
# Local: mongodb://localhost:27017/{{ project.name | lower }}
# Atlas: mongodb+srv://username:password@cluster.mongodb.net/{{ project.name | lower }}
DATABASE_URL=mongodb://localhost:27017/{{ project.name | lower }}
{% elif database.type === 'PostgreSQL' %}
# PostgreSQL Connection String  
# Format: postgresql://[user[:password]@][host][:port]/database[?options]
# Example: postgresql://postgres:postgres@localhost:5432/{{ project.name | lower }}?schema=public
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/{{ project.name | lower }}?schema=public
{% elif database.type === 'MySQL' %}
# MySQL Connection String
# Format: mysql://[user[:password]@][host][:port]/database
# Example: mysql://root:root@localhost:3306/{{ project.name | lower }}
DATABASE_URL=mysql://root:root@localhost:3306/{{ project.name | lower }}
{% endif %}

{% if auth and auth.enabled %}
# JWT Authentication Configuration
# ⚠️  CRITICAL: JWT_SECRET is REQUIRED and must be set to a strong random secret!
# - Minimum 32 characters recommended
# - Use a cryptographically secure random string
# - Never commit the actual secret to version control
# - Application will fail to start if JWT_SECRET is not set
# Generate a secure secret with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=CHANGE_THIS_TO_A_STRONG_SECRET_MINIMUM_32_CHARACTERS

# JWT Refresh Token Secret (REQUIRED for refresh token functionality)
# ⚠️  CRITICAL: Must be different from JWT_SECRET!
# - Minimum 32 characters recommended
# - Use a cryptographically secure random string different from JWT_SECRET
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_REFRESH_SECRET=CHANGE_THIS_TO_A_DIFFERENT_STRONG_SECRET_MINIMUM_32_CHARACTERS

JWT_ACCESS_EXPIRY={{ auth.jwt.accessTTL }}
JWT_REFRESH_EXPIRY={{ auth.jwt.refreshTTL }}
{% endif %}

{% if features.caching %}
# Redis Cache Configuration (Optional)
# If not set, will fall back to in-memory caching
# Format: redis://[username][:password]@host:port/database
# Example: redis://localhost:6379 or redis://user:pass@redis-host:6379/0
REDIS_URL=redis://localhost:6379
{% endif %}

{% if features.queues %}
# BullMQ Queue Configuration
# Redis connection for job queues (can reuse REDIS_URL from caching or use separate)
# Using DB 1 for queues to separate from cache (DB 0)
QUEUE_REDIS_URL=redis://localhost:6379/1

# Alternative: Separate host/port configuration
# QUEUE_REDIS_HOST=localhost
# QUEUE_REDIS_PORT=6379
# QUEUE_REDIS_PASSWORD=
# QUEUE_REDIS_DB=1

# Queue Concurrency Settings (how many jobs processed simultaneously per queue)
QUEUE_NOTIFICATION_CONCURRENCY=5
QUEUE_DOCUMENT_CONCURRENCY=3
QUEUE_SYNC_CONCURRENCY=2
QUEUE_ANALYTICS_CONCURRENCY=1
QUEUE_CLEANUP_CONCURRENCY=1

# Job Retention (in days)
QUEUE_COMPLETED_RETENTION=7
QUEUE_FAILED_RETENTION=30

# Rate Limiting (jobs per minute)
QUEUE_RATE_LIMIT_MAX=100
QUEUE_RATE_LIMIT_DURATION=60000

# Retry Strategy
QUEUE_MAX_RETRY_ATTEMPTS=3
QUEUE_RETRY_BACKOFF_TYPE=exponential
QUEUE_RETRY_BACKOFF_DELAY=2000

# Dead Letter Queue Threshold
QUEUE_DLQ_THRESHOLD=100
{% endif %}

{% if features.rateLimit %}
# Rate Limiting Configuration
# THROTTLE_TTL: Time window in milliseconds (default: 60000 = 1 minute)
# THROTTLE_LIMIT: Max requests per time window (default: 10)
THROTTLE_TTL=60000
THROTTLE_LIMIT=10
{% endif %}

{% if oauth and oauth.enabled %}
# OAuth2 Configuration
{% for provider in oauth.providers %}
{% if provider.name == 'google' %}
# Google OAuth2
# Create OAuth2 credentials at: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID={{ provider.clientId }}
GOOGLE_CLIENT_SECRET={{ provider.clientSecret }}
GOOGLE_CALLBACK_URL={{ provider.callbackURL }}
{% endif %}
{% if provider.name == 'github' %}
# GitHub OAuth2
# Create OAuth App at: https://github.com/settings/developers
GITHUB_CLIENT_ID={{ provider.clientId }}
GITHUB_CLIENT_SECRET={{ provider.clientSecret }}
GITHUB_CALLBACK_URL={{ provider.callbackURL }}
{% endif %}
{% endfor %}

# Frontend URL for OAuth redirects
FRONTEND_URL=http://localhost:3000
{% endif %}

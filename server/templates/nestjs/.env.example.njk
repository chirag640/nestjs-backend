# Server Configuration
PORT=3000
NODE_ENV=development

# CSRF Protection (Optional - Enable for session-based auth or cookie-based tokens)
# For stateless JWT APIs, CSRF protection is typically not needed
# Set to 'true' to enable CSRF middleware
ENABLE_CSRF=false

# CORS Configuration
# Comma-separated list of allowed origins for Cross-Origin Resource Sharing
# Example: http://localhost:3000,http://localhost:3001,https://yourdomain.com
ALLOWED_ORIGINS=http://localhost:3000

# Database Configuration
{% if database.type === 'MongoDB' %}
# MongoDB Connection String
# Format: mongodb://[username:password@]host[:port]/database[?options]
# Local: mongodb://localhost:27017/{{ project.name | lower }}
# Atlas: mongodb+srv://username:password@cluster.mongodb.net/{{ project.name | lower }}
DATABASE_URL=mongodb://localhost:27017/{{ project.name | lower }}
{% elif database.type === 'PostgreSQL' %}
# PostgreSQL Connection String  
# Format: postgresql://[user[:password]@][host][:port]/database[?options]
# Example: postgresql://postgres:postgres@localhost:5432/{{ project.name | lower }}?schema=public
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/{{ project.name | lower }}?schema=public
{% elif database.type === 'MySQL' %}
# MySQL Connection String
# Format: mysql://[user[:password]@][host][:port]/database
# Example: mysql://root:root@localhost:3306/{{ project.name | lower }}
DATABASE_URL=mysql://root:root@localhost:3306/{{ project.name | lower }}
{% endif %}

{% if auth and auth.enabled %}
# JWT Authentication Configuration
# ⚠️  CRITICAL: JWT_SECRET is REQUIRED and must be set to a strong random secret!
# - Minimum 32 characters recommended
# - Use a cryptographically secure random string
# - Never commit the actual secret to version control
# - Application will fail to start if JWT_SECRET is not set
# Generate a secure secret with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=CHANGE_THIS_TO_A_STRONG_SECRET_MINIMUM_32_CHARACTERS

# JWT Refresh Token Secret (REQUIRED for refresh token functionality)
# ⚠️  CRITICAL: Must be different from JWT_SECRET!
# - Minimum 32 characters recommended
# - Use a cryptographically secure random string different from JWT_SECRET
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_REFRESH_SECRET=CHANGE_THIS_TO_A_DIFFERENT_STRONG_SECRET_MINIMUM_32_CHARACTERS

JWT_ACCESS_EXPIRY={{ auth.jwt.accessTTL }}
JWT_REFRESH_EXPIRY={{ auth.jwt.refreshTTL }}

# Frontend URL (REQUIRED for email verification and password reset links)
# Used to generate callback URLs in email verification and password reset emails
# Development: http://localhost:3000
# Production: https://yourdomain.com
FRONTEND_URL=http://localhost:3000

# Email Service Configuration (REQUIRED for email functionality)
# SMTP configuration for sending emails (verification, password reset, notifications)
# Common SMTP providers:
# - Gmail: smtp.gmail.com:587 (requires app password: https://support.google.com/accounts/answer/185833)
# - SendGrid: smtp.sendgrid.net:587 (API key as password)
# - Mailgun: smtp.mailgun.org:587
# - AWS SES: email-smtp.region.amazonaws.com:587
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# Email sender information
EMAIL_FROM="{{ project.name }} <noreply@{{ project.name | lower }}.com>"
SUPPORT_EMAIL=support@{{ project.name | lower }}.com
{% endif %}

{% if features.caching %}
# Redis Cache Configuration (Optional)
# If not set, will fall back to in-memory caching
# Format: redis://[username][:password]@host:port/database
# Example: redis://localhost:6379 or redis://user:pass@redis-host:6379/0
REDIS_URL=redis://localhost:6379
{% endif %}

{% if features.queues %}
# BullMQ Queue Configuration
# Redis connection for job queues (can reuse REDIS_URL from caching or use separate)
# Using DB 1 for queues to separate from cache (DB 0)
QUEUE_REDIS_URL=redis://localhost:6379/1

# Alternative: Separate host/port configuration
# QUEUE_REDIS_HOST=localhost
# QUEUE_REDIS_PORT=6379
# QUEUE_REDIS_PASSWORD=
# QUEUE_REDIS_DB=1

# Queue Concurrency Settings (how many jobs processed simultaneously per queue)
QUEUE_NOTIFICATION_CONCURRENCY=5
QUEUE_DOCUMENT_CONCURRENCY=3
QUEUE_SYNC_CONCURRENCY=2
QUEUE_ANALYTICS_CONCURRENCY=1
QUEUE_CLEANUP_CONCURRENCY=1

# Job Retention (in days)
QUEUE_COMPLETED_RETENTION=7
QUEUE_FAILED_RETENTION=30

# Rate Limiting (jobs per minute)
QUEUE_RATE_LIMIT_MAX=100
QUEUE_RATE_LIMIT_DURATION=60000

# Retry Strategy
QUEUE_MAX_RETRY_ATTEMPTS=3
QUEUE_RETRY_BACKOFF_TYPE=exponential
QUEUE_RETRY_BACKOFF_DELAY=2000

# Dead Letter Queue Threshold
QUEUE_DLQ_THRESHOLD=100
{% endif %}

{% if features.rateLimit %}
# Rate Limiting Configuration
# THROTTLE_TTL: Time window in milliseconds (default: 60000 = 1 minute)
# THROTTLE_LIMIT: Max requests per time window (default: 10)
THROTTLE_TTL=60000
THROTTLE_LIMIT=10
{% endif %}

{% if features.s3Upload %}
# AWS S3 File Upload Configuration
# ⚠️  REQUIRED for file upload functionality
# Create IAM user with S3 permissions: s3:PutObject, s3:GetObject, s3:DeleteObject, s3:ListBucket
# Documentation: https://docs.aws.amazon.com/AmazonS3/latest/userguide/

# AWS Credentials
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key_here
AWS_SECRET_ACCESS_KEY=your_aws_secret_key_here

# S3 Bucket Configuration
S3_BUCKET_NAME=your-bucket-name

# Presigned URL Expiration (in seconds)
# How long presigned URLs remain valid (default: 300 = 5 minutes)
S3_PRESIGNED_EXPIRES=300

# File Upload Limits
# Maximum file size in bytes (default: 10MB)
MAX_FILE_SIZE=10485760

# Allowed MIME types (comma-separated)
# Common types: application/pdf, image/jpeg, image/png, image/gif, image/webp
ALLOWED_MIME_TYPES=application/pdf,image/jpeg,image/png,image/gif,image/webp,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document

# Optional: KMS Encryption Key ARN (for enhanced security)
# AWS_KMS_KEY_ARN=arn:aws:kms:region:account:key/key-id
{% endif %}

{% if oauth and oauth.enabled %}
# OAuth2 Configuration
{% for provider in oauth.providers %}
{% if provider.name == 'google' %}
# Google OAuth2
# Create OAuth2 credentials at: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID={{ provider.clientId }}
GOOGLE_CLIENT_SECRET={{ provider.clientSecret }}
GOOGLE_CALLBACK_URL={{ provider.callbackURL }}
{% endif %}
{% if provider.name == 'github' %}
# GitHub OAuth2
# Create OAuth App at: https://github.com/settings/developers
GITHUB_CLIENT_ID={{ provider.clientId }}
GITHUB_CLIENT_SECRET={{ provider.clientSecret }}
GITHUB_CALLBACK_URL={{ provider.callbackURL }}
{% endif %}
{% endfor %}

# Frontend URL for OAuth redirects
FRONTEND_URL=http://localhost:3000
{% endif %}

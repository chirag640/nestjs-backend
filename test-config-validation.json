{
  "projectSetup": {
    "projectName": "sih-health-record",
    "description": "Digital health record system for migrant workers",
    "author": "Chirag",
    "license": "MIT",
    "nodeVersion": "20",
    "packageManager": "npm"
  },
  "databaseConfig": {
    "databaseType": "MongoDB",
    "provider": "Atlas",
    "connectionString": "mongodb+srv://user:pass@cluster.mongodb.net/sih",
    "autoMigration": "push"
  },
  "modelDefinition": {
    "models": [
      {
        "name": "User",
        "timestamps": true,
        "fields": [
          { "name": "name", "type": "string", "required": true },
          {
            "name": "email",
            "type": "string",
            "required": true,
            "unique": true,
            "indexed": true
          },
          { "name": "passwordHash", "type": "string" },
          { "name": "googleId", "type": "string", "indexed": true },
          {
            "name": "role",
            "type": "enum",
            "values": ["admin", "doctor", "worker"],
            "required": true
          },
          { "name": "profileData", "type": "json" },
          { "name": "lastLoginAt", "type": "datetime" }
        ]
      },
      {
        "name": "Worker",
        "timestamps": true,
        "fields": [
          {
            "name": "workerId",
            "type": "string",
            "required": true,
            "unique": true,
            "indexed": true
          },
          { "name": "fullName", "type": "string", "required": true },
          { "name": "dateOfBirth", "type": "date" },
          {
            "name": "gender",
            "type": "enum",
            "values": ["male", "female", "other"]
          },
          { "name": "phoneNumber", "type": "string", "indexed": true },
          { "name": "nativeState", "type": "string" },
          { "name": "nativeDistrict", "type": "string" },
          { "name": "currentAddress", "type": "string" },
          { "name": "bloodGroup", "type": "string" },
          { "name": "consent", "type": "boolean", "default": false },
          { "name": "sensitiveEncrypted", "type": "json" },
          { "name": "dataIntegrityHash", "type": "string" }
        ]
      },
      {
        "name": "Visit",
        "timestamps": true,
        "fields": [
          { "name": "visitDate", "type": "datetime", "default": "now" },
          { "name": "reason", "type": "string" },
          { "name": "notes", "type": "string" },
          { "name": "diagnoses", "type": "string[]" },
          { "name": "prescriptions", "type": "json[]" },
          { "name": "followUpDate", "type": "date" }
        ]
      },
      {
        "name": "Document",
        "timestamps": true,
        "fields": [
          { "name": "fileName", "type": "string", "required": true },
          { "name": "mimeType", "type": "string", "required": true },
          { "name": "storagePath", "type": "string", "required": true },
          { "name": "checksum", "type": "string" },
          { "name": "version", "type": "number", "default": 1 }
        ]
      },
      {
        "name": "Audit",
        "timestamps": true,
        "fields": [
          { "name": "type", "type": "string", "required": true },
          { "name": "actorId", "type": "string" },
          { "name": "action", "type": "string", "required": true },
          { "name": "details", "type": "json" }
        ]
      },
      {
        "name": "Notification",
        "timestamps": true,
        "fields": [
          { "name": "scheduledAt", "type": "datetime", "required": true },
          {
            "name": "status",
            "type": "enum",
            "values": ["pending", "sent", "acknowledged"],
            "default": "pending"
          }
        ]
      }
    ],
    "relationships": [
      {
        "type": "one-to-many",
        "sourceModel": "Worker",
        "targetModel": "Visit",
        "fieldName": "visits"
      },
      {
        "type": "one-to-many",
        "sourceModel": "Worker",
        "targetModel": "Document",
        "fieldName": "documents"
      },
      {
        "type": "many-to-one",
        "sourceModel": "Visit",
        "targetModel": "Worker",
        "fieldName": "workerId"
      },
      {
        "type": "many-to-one",
        "sourceModel": "Visit",
        "targetModel": "User",
        "fieldName": "providerId"
      },
      {
        "type": "many-to-one",
        "sourceModel": "Document",
        "targetModel": "Worker",
        "fieldName": "workerId"
      },
      {
        "type": "many-to-one",
        "sourceModel": "Document",
        "targetModel": "User",
        "fieldName": "uploaderId"
      },
      {
        "type": "many-to-one",
        "sourceModel": "Notification",
        "targetModel": "Worker",
        "fieldName": "workerId"
      },
      {
        "type": "many-to-one",
        "sourceModel": "Notification",
        "targetModel": "Visit",
        "fieldName": "visitId"
      }
    ]
  },
  "authConfig": {
    "enabled": true,
    "method": "jwt",
    "jwt": {
      "accessTTL": "15m",
      "refreshTTL": "7d",
      "rotation": true,
      "blacklist": true
    },
    "roles": ["admin", "doctor", "worker"]
  },
  "featureSelection": {
    "cors": true,
    "helmet": true,
    "compression": true,
    "validation": true,
    "logging": true,
    "caching": false,
    "swagger": true,
    "health": true,
    "rateLimit": true,
    "versioning": false,
    "queues": true
  }
}
